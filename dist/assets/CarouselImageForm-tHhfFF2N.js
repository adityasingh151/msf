import{r as s,j as e,L as y,E as I,i as U,k as E,l as N,m as v,b as R,g as L,p as F}from"./index-C1Md3IU_.js";import{u as C}from"./index.esm-CSBi2Yp2.js";import{S as k}from"./Saving-5cbZdhLL.js";import{S as D}from"./SuccessNotification-BG_7mmcG.js";const B=()=>{const{register:c,handleSubmit:d,watch:g,formState:{errors:P}}=C(),o=g("imageUrl"),[r,i]=s.useState(),[f,l]=s.useState(!1),[x,b]=s.useState(!0),[p,n]=s.useState(!1),[h,m]=s.useState(!1);s.useEffect(()=>{if(o&&o.length>0){const a=new FileReader;a.onload=t=>i(t.target.result),a.readAsDataURL(o[0])}else i(null)},[o]),s.useEffect(()=>{const a=setTimeout(()=>{b(!1)},1e3);return()=>clearTimeout(a)},[]);const w=async a=>{l(!0);try{const t=a.imageUrl[0],u=U(E(),`carouselImages/${t.name}`);await N(u,t);const S=await v(u),j=R(L(),"carouselImages");await F(j,{imageUrl:S}),n(!0)}catch(t){console.error("Error uploading image: ",t),m(!0)}finally{l(!1)}};return x?e.jsx(y,{}):e.jsxs(e.Fragment,{children:[f&&e.jsx(k,{}),e.jsxs("form",{onSubmit:d(w),className:"p-6 bg-white shadow-lg rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-indigo-600",children:"Upload Carousel Image"}),p&&e.jsx(D,{message:"Image uploaded successfully!",onClose:()=>n(!1)}),h&&e.jsx(I,{message:"Failed to upload image!",onClose:()=>m(!1)}),e.jsxs("div",{className:"my-4",children:[e.jsxs("label",{className:"block text-base font-medium text-gray-700",children:["Upload Image",e.jsx("input",{type:"file",...c("imageUrl",{required:"Image is required"}),className:"mt-1 block w-full pl-3 py-2 text-base text-gray-900 border border-gray-300 rounded-md shadow-sm cursor-pointer focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),r&&e.jsx("img",{src:r,alt:"Preview",className:"mt-4 h-48 w-auto border rounded-md"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Submit Image"})]})]})};export{B as default};

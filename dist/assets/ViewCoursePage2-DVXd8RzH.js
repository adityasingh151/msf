import{r as a,u as k,b as g,g as b,o as D,j as e,L as P,q as $,e as L}from"./index-C1Md3IU_.js";import{b as M,c as O}from"./index-DZXT9Nwh.js";import{M as R}from"./Modal-DhpaDZAq.js";const V=()=>{const[d,r]=a.useState([]),[p,m]=a.useState(!0),[u,j]=a.useState(""),[N,o]=a.useState(!1),[t,v]=a.useState(null),[i,l]=a.useState({message:"",type:""}),C=k();a.useEffect(()=>{const s=g(b(),"coursesPage2"),n=D(s,c=>{if(c.exists()){const f=c.val(),S=Object.keys(f).map(h=>({id:h,...f[h]}));r(S)}else r([]);m(!1)},c=>{j("Failed to fetch data"),m(!1)});return()=>n()},[]);const y=s=>{v({...s,action:"delete"}),o(!0)},w=()=>{if(!t)return;const s=g(b(),`coursesPage2/${t.id}`);L(s).then(()=>{l({message:"Course deleted successfully.",type:"success"}),o(!1),r(d.filter(n=>n.id!==t.id))}).catch(()=>l({message:"Failed to delete course.",type:"error"}))},x=s=>{C(`/admin/forms/course2/edit/${s.id}`)},E=()=>{l({message:"",type:""})};return p?e.jsx(P,{}):u?e.jsxs("div",{children:["Error: ",u]}):e.jsxs("div",{className:"max-w-6xl mx-auto py-6",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center mb-6",children:"Manage Courses for College Students"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(s=>e.jsxs("div",{className:"bg-white shadow rounded overflow-hidden",children:[e.jsx("img",{src:s.imageUrl,alt:s.courseName,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:s.courseName}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:s.description}),e.jsxs("p",{className:"font-semibold",children:["Fee: Rs. ",s.fee]}),e.jsxs("p",{className:"font-semibold",children:["Webinars: ",s.webinars]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("button",{onClick:()=>x(s),className:"text-blue-500 hover:text-blue-700 flex items-center",children:[e.jsx(M,{className:"mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>y(s),className:"text-red-500 hover:text-red-700 flex items-center",children:[e.jsx(O,{className:"mr-2"}),"Delete"]})]})]})]},s.id))}),t&&e.jsxs(R,{isOpen:N,title:`Confirm ${t.action==="delete"?"Deletion":"Edit"}`,onClose:()=>o(!1),children:[e.jsxs("p",{children:["Are you sure you want to ",t.action==="delete"?`delete "${t.courseName}"?`:`edit "${t.courseName}"?`]}),t.action==="delete"?e.jsx("button",{onClick:w,className:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded mr-2",children:"Confirm"}):e.jsx("button",{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded mr-2",children:"Proceed to Edit"})]}),i.message&&e.jsx($,{message:i.message,type:i.type,onClose:E})]})};export{V as default};

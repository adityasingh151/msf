import{r as t,g as m,b as f,o as N,d as S,j as e,L as k,k as E,i as D,C as M,e as L}from"./index-C1Md3IU_.js";import{M as R}from"./Modal-DhpaDZAq.js";const F=()=>{const[x,b]=t.useState([]),[h,n]=t.useState(!0),[i,j]=t.useState(null),[p,r]=t.useState(!1),[v,c]=t.useState(""),[d,y]=t.useState(null);t.useEffect(()=>{const s=m(),a=f(s,"carouselImages"),o=N(a,l=>{const u=l.val()||{},C=Object.keys(u).map(g=>({id:g,url:u[g].imageUrl}));b(C),n(!1)},l=>{console.error(l),j("Failed to fetch images"),n(!1)});return()=>S(a,"value",o)},[]);const w=s=>{y(s),c("Are you sure you want to delete this image?"),r(!0)},I=async()=>{const s=E(),a=D(s,d.url);try{await M(a),await L(f(m(),`carouselImages/${d.id}`)),r(!1)}catch(o){console.error("Error removing image: ",o),c("Failed to delete image.")}};return h?e.jsx(k,{}):i?e.jsxs("div",{children:["Error: ",i]}):e.jsxs("div",{className:"mx-auto py-1",style:{width:"100%",maxWidth:"1200px"},children:[e.jsxs(R,{isOpen:p,onClose:()=>r(!1),title:"Confirm Deletion",children:[e.jsx("p",{children:v}),e.jsx("button",{onClick:I,className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"Delete Image"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"h-80 w-full bg-cover bg-center",style:{backgroundImage:`url(${s.url})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-25"}),e.jsx("div",{className:"absolute inset-0 flex flex-col justify-end p-4",children:e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("button",{className:"text-white bg-red-600 hover:bg-red-700 p-2 rounded",onClick:()=>w(s),children:"Delete"})})})]})},s.id))})]})};export{F as default};

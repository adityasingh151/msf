import{r as t,g as f,b as x,o as C,j as e,L as E,q as S,e as D}from"./index-C1Md3IU_.js";import{M as T}from"./Modal-DhpaDZAq.js";const M=()=>{const[c,h]=t.useState([]),[b,u]=t.useState(!0),[g,m]=t.useState(!1),[o,w]=t.useState(null),[j,a]=t.useState(!1),[l,n]=t.useState({show:!1,message:"",type:""});t.useEffect(()=>{console.log("view works");const s=f(),r=x(s,"workshops");return C(r,i=>{const d=i.val();if(d){const N=Object.keys(d).map(p=>({id:p,...d[p]}));h(N)}else m(!0);u(!1)},i=>{console.error(i),m(!0),u(!1)}),()=>{}},[]);const y=async()=>{const s=f();try{await D(x(s,`workshops/${o.id}`)),a(!1),h(c.filter(r=>r.id!==o.id)),n({show:!0,message:"Workshop deleted successfully!",type:"success"}),setTimeout(()=>n({show:!1,message:"",type:""}),3e3)}catch(r){console.error("Error removing workshop: ",r),n({show:!0,message:"Failed to delete workshop!",type:"error"})}},k=s=>{w(s),a(!0)},v=s=>{window.location.href=`/admin/forms/workshop/edit/${s.id}`};return b?e.jsx(E,{}):g?e.jsx("div",{children:"Failed to load workshops. Please try again later."}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Workshops"}),c.map(s=>e.jsxs("div",{className:"p-4 border rounded mb-2 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:s.headerTitle}),e.jsx("p",{children:s.aboutTitle})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>k(s),className:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2",children:"Delete"}),e.jsx("button",{onClick:()=>v(s),className:"bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded",children:"Edit"})]})]},s.id)),e.jsxs(T,{isOpen:j,title:"Confirm Deletion",onClose:()=>a(!1),children:[e.jsxs("p",{children:["Are you sure you want to delete the workshop: ",o==null?void 0:o.headerTitle,"? This action cannot be undone."]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{onClick:y,className:"bg-red-600 hover:bg-red-800 text-white py-1 px-3 rounded mr-2",children:"Confirm"}),e.jsx("button",{onClick:()=>a(!1),className:"bg-gray-300 hover:bg-gray-400 text-black py-1 px-3 rounded",children:"Cancel"})]})]}),l.show&&e.jsx(S,{message:l.message,type:l.type,onClose:()=>n({show:!1,message:"",type:""})})]})};export{M as default};

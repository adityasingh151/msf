import{r,u as B,g as h,j as e,L as P,q as T,b as g,o as V,e as A}from"./index-C1Md3IU_.js";import{b as F,c as z}from"./index-DZXT9Nwh.js";import{M as G}from"./Modal-DhpaDZAq.js";const K=()=>{const[f,b]=r.useState([]),[p,j]=r.useState([]),[C,N]=r.useState([]),[v,y]=r.useState([]),[S,$]=r.useState(!0),[w,c]=r.useState(!1),[s,E]=r.useState(null),[n,i]=r.useState({message:"",type:""}),D=B();r.useEffect(()=>{const o=h(),t=(a,u)=>{const O=g(o,`courses/${a}`);V(O,R=>{const d=R.val();if(d){const q=Object.keys(d).map(x=>({id:x,...d[x]}));u(q)}else u([])})};t("students",b),t("teachers",j),t("college",N),t("methods",y),$(!1)},[]);const M=(o,t)=>{E({...o,category:t,action:"delete"}),c(!0)},k=()=>{if(!s)return;const o=g(h(),`courses/${s.category}/${s.id}`);A(o).then(()=>{i({message:"Course deleted successfully.",type:"success"}),c(!1)}).catch(()=>i({message:"Failed to delete course.",type:"error"}))},m=(o,t)=>{D(`/admin/forms/courses/edit/${o.id}/${t}`)},L=()=>{i({message:"",type:""})};if(S)return e.jsx(P,{});const l=(o,t)=>e.jsxs("div",{className:"my-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-indigo-700 mb-6",children:[t," Courses"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.map(a=>e.jsxs("div",{className:"bg-white shadow rounded overflow-hidden",children:[e.jsx("img",{src:a.imgSrc,alt:a.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:a.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:a.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>m(a,t),className:"text-blue-500 hover:text-blue-700 flex items-center",children:[e.jsx(F,{className:"mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>M(a,t),className:"text-red-500 hover:text-red-700 flex items-center",children:[e.jsx(z,{className:"mr-2"}),"Delete"]})]})]})]},a.id))})]});return e.jsxs("div",{className:"container mx-auto p-4 sm:mt-2 mt-20",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center mb-6",children:"Manage Courses"}),l(f,"students"),l(p,"teachers"),l(C,"college"),l(v,"methods"),s&&e.jsxs(G,{isOpen:w,title:`Confirm ${s.action==="delete"?"Deletion":"Edit"}`,onClose:()=>c(!1),children:[e.jsxs("p",{children:["Are you sure you want to ",s.action==="delete"?`delete "${s.title}" (${s.category})?`:`edit "${s.title}" (${s.category})?`]}),s.action==="delete"?e.jsx("button",{onClick:k,className:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded mr-2",children:"Confirm"}):e.jsx("button",{onClick:()=>m(s,s.category),className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded mr-2",children:"Proceed to Edit"})]}),n.message&&e.jsx(T,{message:n.message,type:n.type,onClose:L})]})};export{K as default};

import{r as t,u as M,g as x,b as g,o as L,j as e,L as _,B as o,q as B,e as D}from"./index-C_4GKcXO.js";import{M as q}from"./Modal-Dq7Jk1RX.js";const T=()=>{const[d,c]=t.useState([]),[h,f]=t.useState(!0),[u,p]=t.useState(null),[b,a]=t.useState(!1),[j,y]=t.useState(""),[n,l]=t.useState({show:!1,message:"",type:""}),N=M();t.useEffect(()=>{const s=x(),i=g(s,"books");return L(i,S=>{const r=S.val(),C=r?Object.keys(r).map(m=>({id:m,...r[m]})):[];c(C),f(!1)}),()=>{}},[]);const w=async()=>{const s=x();await D(g(s,`books/${u.id}`)),a(!1),c(d.filter(i=>i.id!==u.id)),l({show:!0,message:"Book deleted successfully!",type:"success"}),setTimeout(()=>l({show:!1,message:"",type:""}),3e3)},v=s=>{p(s),y(`Are you sure you want to delete the book: <strong>${o.sanitize(s.title)}</strong>?`),a(!0)},k=s=>{N("/admin/forms/book",{state:{editData:s}})};return h?e.jsx(_,{}):e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Manage Books"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(s=>e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:o.sanitize(s.title)},className:"ql-editor"})}),e.jsx("p",{className:"text-gray-600",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:o.sanitize(s.author)},className:"ql-editor"})}),e.jsx("p",{className:"text-gray-600",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:o.sanitize(s.publisher)},className:"ql-editor"})})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>k(s),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>v(s),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition duration-300",children:"Delete"})]})]},s.id))}),e.jsxs(q,{isOpen:b,title:"Confirm Deletion",onClose:()=>a(!1),children:[e.jsx("p",{dangerouslySetInnerHTML:{__html:j},className:"ql-editor"}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{onClick:w,className:"bg-red-600 hover:bg-red-800 text-white font-bold py-2 px-4 rounded transition duration-300",children:"Confirm"}),e.jsx("button",{onClick:()=>a(!1),className:"bg-gray-300 hover:bg-gray-400 text-black font-bold py-2 px-4 rounded transition duration-300",children:"Cancel"})]})]}),n.show&&e.jsx(B,{message:n.message,type:n.type,onClose:()=>l({show:!1,message:"",type:""})})]})};export{T as default};

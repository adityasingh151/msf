import{r as l,u as E,g as p,b as h,o as C,d as O,j as e,L as S,k,i as P,C as L,e as M}from"./index-C1Md3IU_.js";import{M as R}from"./Modal-DhpaDZAq.js";const F=()=>{const[b,f]=l.useState([]),[g,d]=l.useState(!0),[i,j]=l.useState(null),[c,r]=l.useState(!1),[a,v]=l.useState(null),w=E();l.useEffect(()=>{const t=p(),o=h(t,"people"),s=C(o,n=>{const m=n.val()||{};f(Object.keys(m).map(x=>({id:x,...m[x]}))),d(!1)},n=>{console.error(n),j("Failed to fetch people"),d(!1)});return()=>O(o,"value",s)},[]);const y=async()=>{const t=k(),o=P(t,a.photoUrl);try{await L(o),await M(h(p(),`people/${a.id}`)),r(!1),alert("Person deleted successfully!")}catch(s){console.error("Error removing person:",s),alert("Failed to delete person.")}},N=t=>{v(t),r(!0)},D=t=>{w(`/admin/forms/people/edit/${t.id}`)};if(g)return e.jsx(S,{});if(i)return e.jsxs("div",{children:["Error: ",i]});const u=b.reduce((t,o)=>(t[o.position]||(t[o.position]=[]),t[o.position].push(o),t),{});return e.jsxs("div",{className:"container mx-auto py-4 px-6",children:[c&&e.jsxs(R,{isOpen:c,onClose:()=>r(!1),title:"Confirm Deletion",children:[e.jsxs("p",{children:["Are you sure you want to delete ",a==null?void 0:a.name,"? This action cannot be undone."]}),e.jsx("button",{onClick:y,className:"bg-red-500 hover:bg-red-700 text-white py-1 px-3 rounded mt-4",children:"Delete"})]}),e.jsx("h1",{className:"text-2xl font-bold mb-8 text-center",children:"People Directory"}),Object.keys(u).map((t,o)=>e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 border-b-2 pb-2",children:t}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u[t].map(s=>e.jsxs("div",{className:"border p-4 rounded shadow-lg flex flex-col justify-between bg-white hover:shadow-2xl transition-shadow duration-300",children:[s.photoUrl&&e.jsx("img",{src:s.photoUrl,alt:s.name,className:"w-full h-48 object-cover rounded-md mb-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.details})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("button",{onClick:()=>N(s),className:"bg-red-500 hover:bg-red-700 text-white py-1 px-3 rounded",children:"Delete"}),e.jsx("button",{onClick:()=>D(s),className:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-3 rounded",children:"Edit"})]})]},s.id))})]},o))]})};export{F as default};

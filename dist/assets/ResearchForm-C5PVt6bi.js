import{r as o,u as E,D as w,j as e,L as R,R as n,E as y,g as P,b as m,n as T,p as C}from"./index-C1Md3IU_.js";import{u as L}from"./index.esm-CSBi2Yp2.js";import{S as D}from"./Saving-5cbZdhLL.js";import{S as F}from"./SuccessNotification-BG_7mmcG.js";const U=()=>{var d;const{register:k,handleSubmit:x,setValue:a,reset:p,formState:{errors:i}}=L(),[f,u]=o.useState(!1),[j,g]=o.useState(!0),[b,l]=o.useState(!1),[S,c]=o.useState(!1),v=E(),s=(d=w().state)==null?void 0:d.editData;o.useEffect(()=>{s&&(a("title",s.title),a("authors",s.authors),a("journal",s.journal)),g(!1)},[s,a]);const N=async t=>{u(!0);const h=P();try{if(s){const r=m(h,`researchPapers/${s.id}`);await T(r,t)}else{const r=m(h,"researchPapers");await C(r,t)}p(),l(!0),setTimeout(()=>{l(!1),v("/admin/view/research")},2e3)}catch(r){console.error("Error saving research paper: ",r),c(!0),setTimeout(()=>c(!1),2e3)}finally{u(!1)}};return j?e.jsx(R,{}):e.jsxs(e.Fragment,{children:[f&&e.jsx(D,{}),e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:s?"Edit Research Paper":"Add New Research Paper"}),e.jsxs("form",{onSubmit:x(N),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx(n,{value:s?s.title:"",onChange:t=>a("title",t),placeholder:"Enter the research paper title"}),i.title&&e.jsx("p",{className:"text-red-500 text-xs italic",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Authors"}),e.jsx(n,{value:s?s.authors:"",onChange:t=>a("authors",t),placeholder:"Enter the research paper authors"}),i.authors&&e.jsx("p",{className:"text-red-500 text-xs italic",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Journal"}),e.jsx(n,{value:s?s.journal:"",onChange:t=>a("journal",t),placeholder:"Enter the journal name"}),i.journal&&e.jsx("p",{className:"text-red-500 text-xs italic",children:"This field is required"})]}),e.jsx("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:s?"Update Research Paper":"Add Research Paper"})]}),b&&e.jsx(F,{message:"Research paper submitted successfully!",onClose:()=>l(!1)}),S&&e.jsx(y,{message:"Failed to submit research paper!",onClose:()=>c(!1)})]})]})};export{U as default};

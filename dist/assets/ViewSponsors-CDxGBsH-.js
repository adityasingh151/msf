import{r as t,u as C,g as x,b as p,o as D,j as e,L as E,q as M,e as k}from"./index-C_4GKcXO.js";import{M as L}from"./Modal-Dq7Jk1RX.js";const $=()=>{const[r,i]=t.useState([]),[g,u]=t.useState(!0),[d,h]=t.useState(null),[f,o]=t.useState(!1),[b,j]=t.useState(""),[a,l]=t.useState({show:!1,message:"",type:""}),N=C();t.useEffect(()=>{const s=x(),n=p(s,"sponsorsImages");D(n,w=>{const c=w.val();i(Object.keys(c).map(m=>({id:m,...c[m]}))),u(!1)}),console.log("ViewSponsors")},[]);const y=async()=>{const s=x();await k(p(s,`sponsorsImages/${d.id}`)),o(!1),i(r.filter(n=>n.id!==d.id)),l({show:!0,message:"Sponsor deleted successfully!",type:"success"}),setTimeout(()=>l({show:!1,message:"",type:""}),3e3)},S=s=>{h(s),j("Are you sure you want to delete this sponsor?"),o(!0)},v=s=>{console.log("Edit Sponsor called."),N(`/admin/forms/sponsors/edit/${s.id}`,{state:{sponsor:s}})};return g?e.jsx(E,{}):e.jsxs("div",{className:"container mx-auto p-4 sm:mt-2 mt-20",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-center ",children:"Manage Sponsors"}),e.jsxs("div",{className:"my-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-indigo-700 mb-6",children:"Sponsors"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map(s=>e.jsxs("div",{className:"p-4 border rounded mb-2 flex flex-col items-center",children:[e.jsx("img",{src:s.imageUrl,alt:`Sponsor ${s.sponsorName}`,className:"w-full h-48 object-cover rounded-lg"}),e.jsx("p",{className:"mt-2 font-bold",children:s.sponsorName}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s.sponsorDetails}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx("button",{onClick:()=>S(s),className:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2",children:"Delete"}),e.jsx("button",{onClick:()=>v(s),className:"bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded",children:"Edit"})]})]},s.id))})]}),e.jsxs(L,{isOpen:f,title:"Confirm Deletion",onClose:()=>o(!1),children:[e.jsx("p",{children:b}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{onClick:y,className:"bg-red-600 hover:bg-red-800 text-white py-1 px-3 rounded mr-2",children:"Confirm"}),e.jsx("button",{onClick:()=>o(!1),className:"bg-gray-300 hover:bg-gray-400 text-black py-1 px-3 rounded",children:"Cancel"})]})]}),a.show&&e.jsx(M,{message:a.message,type:a.type,onClose:()=>l({show:!1,message:"",type:""})})]})};export{$ as default};

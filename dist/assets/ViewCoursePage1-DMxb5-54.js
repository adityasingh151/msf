import{r as a,u as k,b as g,g as b,o as D,j as e,L as P,q as $,e as L}from"./index-C1Md3IU_.js";import{b as M,c as O}from"./index-DZXT9Nwh.js";import{M as R}from"./Modal-DhpaDZAq.js";const T=()=>{const[d,i]=a.useState([]),[j,m]=a.useState(!0),[u,p]=a.useState(""),[N,o]=a.useState(!1),[t,v]=a.useState(null),[l,r]=a.useState({message:"",type:""}),y=k();a.useEffect(()=>{const s=g(b(),"coursesPage1"),n=D(s,c=>{if(c.exists()){const f=c.val(),S=Object.keys(f).map(h=>({id:h,...f[h]}));i(S)}else i([]);m(!1)},c=>{p("Failed to fetch data"),m(!1)});return()=>n()},[]);const C=s=>{v({...s,action:"delete"}),o(!0)},w=()=>{if(!t)return;const s=g(b(),`coursesPage1/${t.id}`);L(s).then(()=>{r({message:"Course deleted successfully.",type:"success"}),o(!1),i(d.filter(n=>n.id!==t.id))}).catch(()=>r({message:"Failed to delete course.",type:"error"}))},x=s=>{console.log(s.id),y(`/admin/forms/course1/edit/${s.id}`)},E=()=>{r({message:"",type:""})};return j?e.jsx(P,{}):u?e.jsxs("div",{children:["Error: ",u]}):e.jsxs("div",{className:"max-w-6xl mx-auto py-6",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center mb-6",children:"Manage Teacher Courses"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(s=>e.jsxs("div",{className:"bg-white shadow rounded overflow-hidden",children:[e.jsx("img",{src:s.imgSrc,alt:s.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:s.details}),e.jsx("p",{className:"font-semibold",children:s.duration}),e.jsxs("p",{className:"font-semibold",children:["Rs. ",s.fees]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("button",{onClick:()=>x(s),className:"text-blue-500 hover:text-blue-700 flex items-center",children:[e.jsx(M,{className:"mr-2"}),"Edit"]}),e.jsxs("button",{onClick:()=>C(s),className:"text-red-500 hover:text-red-700 flex items-center",children:[e.jsx(O,{className:"mr-2"}),"Delete"]})]})]})]},s.id))}),t&&e.jsxs(R,{isOpen:N,title:`Confirm ${t.action==="delete"?"Deletion":"Edit"}`,onClose:()=>o(!1),children:[e.jsxs("p",{children:["Are you sure you want to ",t.action==="delete"?`delete "${t.title}"?`:`edit "${t.title}"?`]}),t.action==="delete"?e.jsx("button",{onClick:w,className:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded mr-2",children:"Confirm"}):e.jsx("button",{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded mr-2",children:"Proceed to Edit"})]}),l.message&&e.jsx($,{message:l.message,type:l.type,onClose:E})]})};export{T as default};

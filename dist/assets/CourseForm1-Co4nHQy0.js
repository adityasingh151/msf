import{r as a,f as R,g as j,b as m,h as L,j as s,L as k,E as Z,s as A,p as U}from"./index-C1Md3IU_.js";import{u as q}from"./index.esm-CSBi2Yp2.js";import{B}from"./index-DZXT9Nwh.js";import{S as O}from"./Saving-5cbZdhLL.js";import{S as T}from"./SuccessNotification-BG_7mmcG.js";const Q=({editMode:n})=>{const{register:g,handleSubmit:v,setValue:u,watch:z,formState:{errors:i}}=q(),[l,f]=a.useState(["title","content","details","duration","fees","imgSrc"]),[y,p]=a.useState(!1),[N,d]=a.useState(!0),{courseId:c}=R(),[C,h]=a.useState(!1),[$,x]=a.useState(!1),[b,S]=a.useState(null);a.useEffect(()=>{if(console.log(n,c),n&&c){const e=j(),r=m(e,`coursesPage1/${c}`);L(r).then(t=>{if(t.exists()){const o=t.val();Object.keys(o).forEach(w=>u(w,o[w])),S(o.imgSrc)}else console.log("No data available");d(!1)}).catch(t=>{console.error(t),d(!1)})}else d(!1)},[n,c,u]);const E=async e=>{p(!0);try{const r=j();if(n&&c){const t=m(r,`coursesPage1/${c}`);await A(t,e),console.log("Course data updated successfully!",e)}else{const t=m(r,"coursesPage1");await U(t,e),console.log("Course data submitted successfully!",e)}h(!0)}catch(r){console.log("Error adding/updating course data: ",r),x(!0)}finally{p(!1)}},D=e=>{const r=e.target.files[0];if(r){const t=new FileReader;t.onloadend=()=>{u("imgSrc",t.result),S(t.result)},t.readAsDataURL(r)}},F=e=>{const r=new Set(l),t=e.every(o=>r.has(o));f(t?l.filter(o=>!e.includes(o)):[...l,...e.filter(o=>!r.has(o))])},P=e=>e.includes("Date")?"date":e.includes("Time")?"time":"text",I={courseDetails:["title","content","duration","fees","imgSrc"],additionalDetails:["details"]};return N?s.jsx(k,{}):s.jsxs(s.Fragment,{children:[y&&s.jsx(O,{}),s.jsxs("div",{className:"flex",children:[C&&s.jsx(T,{message:"Item Created Successfully!",onClose:()=>h(!1)}),$&&s.jsx(Z,{message:"Something went wrong!",onClose:()=>x(!1)}),s.jsxs("form",{onSubmit:v(E),className:"p-6 bg-white shadow-lg rounded-lg flex-grow space-y-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-indigo-600",children:"Course Details"}),l.map(e=>s.jsxs("div",{className:"relative",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 capitalize",children:[e.replace(/([A-Z])/g," $1"),s.jsx("span",{className:"text-red-500",children:"*"})]}),e==="details"?s.jsx("textarea",{...g("details",{required:!0}),className:`mt-1 block w-full pl-3 pr-12 py-2 border ${i[e]?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`,placeholder:`Enter ${e.replace(/([A-Z])/g," $1")}`}):e==="imgSrc"?s.jsx("input",{type:"file",accept:"image/*",className:`mt-1 block w-full pl-3 pr-12 py-2 border ${i[e]?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`,onChange:D}):s.jsx("input",{type:P(e),...g(e,{required:!0,minLength:{value:3,message:"Minimum length is 3 characters"}}),className:`mt-1 block w-full pl-3 pr-12 py-2 border ${i[e]?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`,placeholder:`Enter ${e.replace(/([A-Z])/g," $1")}`}),i[e]&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:i[e].message})]},e)),b&&s.jsx("div",{className:"mt-4",children:s.jsx("img",{src:b,alt:"Preview",className:"w-full h-64 object-cover"})}),s.jsx("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:n?"Update Course Details":"Submit Course Details"})]}),s.jsx("div",{className:"flex flex-col space-y-2 p-6",children:Object.entries(I).map(([e,r])=>s.jsxs("button",{onClick:()=>F(r),className:`text-sm py-2 px-4 rounded transition duration-300 flex items-center gap-2 ${l.some(t=>r.includes(t))?"bg-red-500 hover:bg-red-700":"bg-blue-500 hover:bg-blue-700"} text-white`,children:[s.jsx(B,{})," ",l.some(t=>r.includes(t))?"Remove":"Add"," ",e.replace(/([A-Z])/g," $1").replace("Details"," Details")]},e))})]})]})};export{Q as default};

import{r as l,u as Q,g as S,k as T,j as t,L as W,q as X,b as I,o as Y,e as Z,i as M,C as ee,n as te,m as se}from"./index-C1Md3IU_.js";import{M as ae}from"./Modal-DhpaDZAq.js";const re=()=>{const[i,x]=l.useState([]),[m,U]=l.useState([]),[g,k]=l.useState([]),[L,R]=l.useState(!0),[o,$]=l.useState(null),[V,n]=l.useState(!1),[G,E]=l.useState(""),[h,c]=l.useState({show:!1,message:"",type:""}),[O,P]=l.useState([]),[b,q]=l.useState("All"),[A,p]=l.useState(null),F=Q();l.useEffect(()=>{const e=S(),s=T(),a=(C,u)=>{const v=I(e,C);Y(v,async N=>{const r=N.val();if(r){const w=await Promise.all(Object.keys(r).map(async D=>{const d=r[D];if(d.imageUrls&&Array.isArray(d.imageUrls)){const z=await Promise.all(d.imageUrls.map(async J=>{const K=M(s,J);return await se(K)}));return{id:D,...d,imageUrls:z}}return{id:D,...d}}));u(w)}})};a("imageContent",x),a("videoContent",U),a("articleContent",k),R(!1)},[]),l.useEffect(()=>{const e=new Set;i.forEach(s=>e.add(s.category)),m.forEach(s=>e.add(s.category)),g.forEach(s=>e.add(s.category)),P(["All",...e])},[i,m,g]);const _=async()=>{const e=S(),s=o.type;await Z(I(e,`${s}/${o.id}`)),n(!1),s==="imageContent"?x(i.filter(a=>a.id!==o.id)):s==="videoContent"?U(m.filter(a=>a.id!==o.id)):s==="articleContent"&&k(g.filter(a=>a.id!==o.id)),c({show:!0,message:"Item deleted successfully!",type:"success"}),setTimeout(()=>c({show:!1,message:"",type:""}),3e3)},B=async e=>{const s=S(),a=T(),C=o.type,u=o.imageUrls.filter((r,w)=>w!==e),v=o.imageUrls[e],N=M(a,v);await ee(N),await te(I(s,`${C}/${o.id}`),{imageUrls:u}),x(i.map(r=>r.id===o.id?{...r,imageUrls:u}:r)),n(!1),p(null),c({show:!0,message:"Image deleted successfully!",type:"success"}),setTimeout(()=>c({show:!1,message:"",type:""}),3e3)},f=(e,s)=>{$({...e,type:s}),E(`Are you sure you want to delete this ${s.slice(0,-7)}?`),n(!0),p(null)},H=(e,s)=>{$({...e,type:"imageContent"}),p(s),E("Are you sure you want to delete this image?"),n(!0)},y=(e,s)=>{F(`/admin/forms/${s.slice(0,-7)}/edit/${e.id}`,{state:{item:e,type:s}})},j=e=>b==="All"?e:e.filter(s=>s.category===b);return L?t.jsx(W,{}):t.jsxs("div",{className:"container mx-auto p-4 sm:mt-2 mt-20",children:[t.jsx("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Manage Content"}),t.jsxs("div",{className:"mb-8",children:[t.jsx("label",{className:"text-lg font-semibold",children:"Filter by Category: "}),t.jsx("select",{className:"border rounded p-2 ml-2",value:b,onChange:e=>q(e.target.value),children:O.map((e,s)=>t.jsx("option",{value:e,children:e},s))})]}),t.jsxs("div",{className:"my-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-indigo-700 mb-6",children:"Gallery Images"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:j(i).map(e=>t.jsxs("div",{className:"p-4 border rounded mb-2 flex flex-col items-center",children:[e.imageUrls&&e.imageUrls.length>0?e.imageUrls.map((s,a)=>t.jsxs("div",{className:"mb-2",children:[t.jsx("img",{src:s,alt:`Gallery Image ${e.id}-${a}`,className:"w-full h-48 object-cover rounded-lg mb-2"}),t.jsx("div",{className:"flex justify-between",children:t.jsx("button",{onClick:()=>H(e,a),className:"bg-red-500 hover:bg-red-700 text-white py-1 px-2 rounded mr-2",children:"Delete Image"})})]},a)):t.jsx("p",{children:"No images available"}),t.jsx("p",{children:e.imageDetails}),t.jsxs("div",{className:"flex mt-2",children:[t.jsx("button",{onClick:()=>f(e,"imageContent"),className:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2",children:"Delete Item"}),t.jsx("button",{onClick:()=>y(e,"imageContent"),className:"bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded",children:"Edit Item"})]})]},e.id))})]}),t.jsxs("div",{className:"my-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-indigo-700 mb-6",children:"Videos"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j(m).map(e=>t.jsxs("div",{className:"p-4 border rounded mb-2 flex flex-col items-center",children:[t.jsx("iframe",{title:`Video ${e.videoDetails}`,src:`https://www.youtube.com/embed/${e.videoUrl}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"aspect-video w-full mb-2",style:{border:"none"}}),t.jsx("p",{children:e.videoDetails}),t.jsxs("div",{className:"flex mt-2",children:[t.jsx("button",{onClick:()=>f(e,"videoContent"),className:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2",children:"Delete"}),t.jsx("button",{onClick:()=>y(e,"videoContent"),className:"bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded",children:"Edit"})]})]},e.id))})]}),t.jsxs("div",{className:"my-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-indigo-700 mb-6",children:"Articles"}),j(g).map(e=>t.jsxs("div",{className:"p-4 border rounded mb-2",children:[t.jsxs("a",{href:e.articleUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors",children:[e.articleHeading," ",t.jsx("span",{className:"italic text-sm text-gray-600",children:"~ Prof. Dinesh Singh"})]}),t.jsxs("div",{className:"flex mt-2",children:[t.jsx("button",{onClick:()=>f(e,"articleContent"),className:"bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded mr-2",children:"Delete"}),t.jsx("button",{onClick:()=>y(e,"articleContent"),className:"bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded",children:"Edit"})]})]},e.id))]}),t.jsxs(ae,{isOpen:V,title:"Confirm Deletion",onClose:()=>n(!1),children:[t.jsx("p",{children:G}),t.jsxs("div",{className:"mt-4 flex justify-end",children:[A!==null?t.jsx("button",{onClick:()=>B(A),className:"bg-red-600 hover:bg-red-800 text-white py-1 px-3 rounded mr-2",children:"Confirm"}):t.jsx("button",{onClick:_,className:"bg-red-600 hover:bg-red-800 text-white py-1 px-3 rounded mr-2",children:"Confirm"}),t.jsx("button",{onClick:()=>n(!1),className:"bg-gray-300 hover:bg-gray-400 text-black py-1 px-3 rounded",children:"Cancel"})]})]}),h.show&&t.jsx(X,{message:h.message,type:h.type,onClose:()=>c({show:!1,message:"",type:""})})]})};export{re as default};

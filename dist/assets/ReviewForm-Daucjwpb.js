import{r,j as e,L as N,E as S,g as R,k,i as E,l as F,m as I,b as L,p as q}from"./index-C1Md3IU_.js";import{u as C}from"./index.esm-CSBi2Yp2.js";import{S as D}from"./Saving-5cbZdhLL.js";import{S as $}from"./SuccessNotification-BG_7mmcG.js";const A=()=>{const{register:i,handleSubmit:c,watch:T,formState:{errors:t}}=C(),[u,n]=r.useState(!1),[g,x]=r.useState(!0),[b,l]=r.useState(!1),[f,d]=r.useState(!1),[o,w]=r.useState(null);r.useEffect(()=>{const s=setTimeout(()=>{x(!1)},1e3);return()=>clearTimeout(s)},[]);const h=async s=>{n(!0);const v=R(),y=k();try{let a="https://i.ibb.co/4g1D9cv/imgslider1.png";if(o){const m=E(y,`reviews/${o.name}`);await F(m,o),a=await I(m)}const j=L(v,"reviews");await q(j,{name:s.name,review:s.review,designation:s.designation,imageUrl:a}),l(!0)}catch(a){console.error("Error saving review: ",a),d(!0)}finally{n(!1)}},p=s=>{s.target.files&&s.target.files[0]&&w(s.target.files[0])};return g?e.jsx(N,{}):e.jsxs(e.Fragment,{children:[u&&e.jsx(D,{}),e.jsxs("form",{onSubmit:c(h),className:"p-6 bg-white shadow-lg rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-indigo-600 mb-4",children:"Submit Your Review"}),b&&e.jsx($,{message:"Review submitted successfully!",onClose:()=>l(!1)}),f&&e.jsx(S,{message:"Failed to submit review!",onClose:()=>d(!1)}),e.jsx("div",{className:"my-4",children:e.jsxs("label",{className:"block text-base font-medium text-gray-700",children:["Reviewer's Name ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx("input",{type:"text",...i("name",{required:"Name is required"}),className:`mt-1 block w-full pl-3 py-2 text-base text-gray-900 border ${t.name?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name.message})]})}),e.jsx("div",{className:"my-4",children:e.jsxs("label",{className:"block text-base font-medium text-gray-700",children:["Review ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx("textarea",{...i("review",{required:"Review is required"}),className:`mt-1 block w-full pl-3 py-2 text-base text-gray-900 border ${t.review?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),t.review&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.review.message})]})}),e.jsx("div",{className:"my-4",children:e.jsxs("label",{className:"block text-base font-medium text-gray-700",children:["Reviewer's Designation",e.jsx("input",{type:"text",...i("designation"),className:"mt-1 block w-full pl-3 py-2 text-base text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})}),e.jsx("div",{className:"my-4",children:e.jsxs("label",{className:"block text-base font-medium text-gray-700",children:["Reviewer's Image",e.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"mt-1 block w-full pl-3 py-2 text-base text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded",children:"Submit Review"})]})]})};export{A as default};
